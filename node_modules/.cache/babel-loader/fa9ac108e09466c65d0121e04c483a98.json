{"ast":null,"code":"import _regeneratorRuntime from\"/var/project/api-call-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/var/project/api-call-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/var/project/api-call-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from\"axios\";import{useFormik}from\"formik\";import React,{useState}from\"react\";import{loginSchema}from\"../axios/helper\";import{toast}from\"react-toastify\";import{useHistory}from\"react-router-dom\";import{useDispatch,useSelector}from\"react-redux\";import{setLoginAuthentication}from\"../redux/actions/auth/auth.action\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Login=function Login(){var history=useHistory();var dispatch=useDispatch();var isAuthenticate=useSelector(function(state){return state.isAuthenticate;});// State declaration\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),isSubmitting=_useState2[0],setIsSubmitting=_useState2[1];var _useFormik=useFormik({initialValues:{email:\"\",password:\"\"},validationSchema:loginSchema,onSubmit:function onSubmit(values){return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:// console.log(values, `values`);\nsetIsSubmitting(true);axios.post(\"https://reqres.in/api/login\",{email:values.email,password:values.password}).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(response){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// console.log(response, `res`);\nif(response.data){localStorage.setItem(\"access_token\",response.data.token);}dispatch(setLoginAuthentication(true));history.push(\"/users\");setIsSubmitting(false);console.log(isAuthenticate,\"isAuthenticate\");case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}()).catch(function(error){// console.log(error, `err`);\ntoast.error(\"User not found\",{position:\"top-center\",autoClose:5000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined});});setIsSubmitting(false);case 3:case\"end\":return _context2.stop();}}},_callee2);}))();}}),handleSubmit=_useFormik.handleSubmit,handleChange=_useFormik.handleChange,values=_useFormik.values,errors=_useFormik.errors,touched=_useFormik.touched;return/*#__PURE__*/_jsx(\"div\",{className:\"login-page\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-100 w-100 d-flex align-items-center justify-content-center\",children:isSubmitting===true?\"Submitting\":/*#__PURE__*/_jsxs(\"form\",{className:\"text-start\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"form-label\",children:\"Email address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",id:\"email\",className:(errors.email&&touched.email?\"input-error\":null)+\" form-control\",\"aria-describedby\":\"emailHelp\",onChange:handleChange,value:values.email}),errors.email?/*#__PURE__*/_jsx(\"span\",{className:\"error-text\",children:errors.email}):null]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"form-label\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",className:(errors.email&&touched.email?\"input-error\":null)+\" form-control\",id:\"password\",onChange:handleChange,value:values.password,autoComplete:\"off\"}),errors.password?/*#__PURE__*/_jsx(\"span\",{className:\"error-text\",children:errors.password}):null]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Login\"}),/*#__PURE__*/_jsx(\"div\",{className:\"d-block mt-3\",children:/*#__PURE__*/_jsxs(\"code\",{children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-center\",children:[\"\\\"email\\\": \\\"\",/*#__PURE__*/_jsx(\"span\",{children:\"eve.holt@reqres.in\"}),\"\\\"\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-center\",children:[\"\\\"password\\\": \\\"\",/*#__PURE__*/_jsx(\"span\",{children:\"cityslicka\"}),\"\\\"\"]})]})})]})})});};","map":{"version":3,"sources":["/var/project/api-call-demo/src/pages/Login.jsx"],"names":["axios","useFormik","React","useState","loginSchema","toast","useHistory","useDispatch","useSelector","setLoginAuthentication","Login","history","dispatch","isAuthenticate","state","isSubmitting","setIsSubmitting","initialValues","email","password","validationSchema","onSubmit","values","post","then","response","data","localStorage","setItem","token","push","console","log","catch","error","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","handleSubmit","handleChange","errors","touched"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport { useFormik } from \"formik\";\nimport React, { useState } from \"react\";\nimport { loginSchema } from \"../axios/helper\";\nimport { toast } from \"react-toastify\";\nimport { useHistory } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { setLoginAuthentication } from \"../redux/actions/auth/auth.action\";\n\nexport const Login = () => {\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const isAuthenticate = useSelector((state) => state.isAuthenticate);\n\n  // State declaration\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const { handleSubmit, handleChange, values, errors, touched } = useFormik({\n    initialValues: {\n      email: \"\",\n      password: \"\",\n    },\n    validationSchema: loginSchema,\n    async onSubmit(values) {\n      // console.log(values, `values`);\n      setIsSubmitting(true);\n      axios\n        .post(`https://reqres.in/api/login`, {\n          email: values.email,\n          password: values.password,\n        })\n        .then(async (response) => {\n          // console.log(response, `res`);\n          if (response.data) {\n            localStorage.setItem(\"access_token\", response.data.token);\n          }\n          dispatch(setLoginAuthentication(true));\n          history.push(\"/users\");\n          setIsSubmitting(false);\n          console.log(isAuthenticate, `isAuthenticate`)\n        })\n        .catch((error) => {\n          // console.log(error, `err`);\n          toast.error(\"User not found\", {\n            position: \"top-center\",\n            autoClose: 5000,\n            hideProgressBar: false,\n            closeOnClick: true,\n            pauseOnHover: true,\n            draggable: true,\n            progress: undefined,\n          });\n        });\n      setIsSubmitting(false);\n    },\n  });\n  return (\n    <div className=\"login-page\">\n      <div className=\"h-100 w-100 d-flex align-items-center justify-content-center\">\n        {isSubmitting === true ? (\n          `Submitting`\n        ) : (\n          <form className=\"text-start\" onSubmit={handleSubmit}>\n            <div className=\"mb-3\">\n              <label htmlFor=\"email\" className=\"form-label\">\n                Email address\n              </label>\n              <input\n                type=\"email\"\n                name=\"email\"\n                id=\"email\"\n                className={\n                  (errors.email && touched.email ? \"input-error\" : null) +\n                  \" form-control\"\n                }\n                aria-describedby=\"emailHelp\"\n                onChange={handleChange}\n                value={values.email}\n              />\n              {errors.email ? (\n                <span className=\"error-text\">{errors.email}</span>\n              ) : null}\n            </div>\n            <div className=\"mb-3\">\n              <label htmlFor=\"password\" className=\"form-label\">\n                Password\n              </label>\n              <input\n                type=\"password\"\n                name=\"password\"\n                className={\n                  (errors.email && touched.email ? \"input-error\" : null) +\n                  \" form-control\"\n                }\n                id=\"password\"\n                onChange={handleChange}\n                value={values.password}\n                autoComplete=\"off\"\n              />\n              {errors.password ? (\n                <span className=\"error-text\">{errors.password}</span>\n              ) : null}\n            </div>\n            <button type=\"submit\" className=\"btn btn-primary\">\n              Login\n            </button>\n            <div className=\"d-block mt-3\">\n              <code>\n                <span className=\"text-center\">\n                  \"email\": \"<span>eve.holt@reqres.in</span>\"\n                </span>\n                <span className=\"text-center\">\n                  \"password\": \"<span>cityslicka</span>\"\n                </span>\n              </code>\n            </div>\n          </form>\n        )}\n      </div>\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}